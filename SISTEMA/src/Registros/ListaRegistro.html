<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" type="image/png" href="../img/logo/logo-final-sinmargen.png">
    <link rel="stylesheet" href="../scss/custom.scss">
    <script type="module" src="../js/app.js"></script>


    <title>Sistema Fabrica de Velas - Lista de Registros</title>
</head>
<body>
<!--#region contenido sistema-->
<div class="container-fluid">
    <div class="row flex-nowrap">
        <div class="col-auto px-0">
            <div id="sidebar" class="collapse collapse-horizontal show border-end sticky-top navbar-dark bg-primary">
                <div id="sidebar-nav" class="list-group text-sm-start vh-100">
                    <a href="/" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none ">
                        <img src="../img/logo/logo-final-sinmargen.png" height="80" class="d-inline-block align-text-top imagen-empresa " alt="logo fabrica">
                        <span class="fs-5 d-none d-sm-block w-90 p-1">Fabrica de Velas La Superior</span>
                    </a>
                    <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-sm-start " id="menu">
                        <li class="nav-item w-100 hover-item">
                            <a href="/" class="nav-link align-middle px-2 px-sm-4">
                                <i class="fa-solid fa-house"></i> <span class="ms-1  d-sm-inline">Inicio</span>
                            </a>
                        </li>
                        <li class="nav-item w-100 hover-item">
                            <a href="#submenu1" data-bs-toggle="collapse" class="nav-link px-2 px-sm-4 align-middle">
                                <i class="fa-solid fa-down-left-and-up-right-to-center"></i> <span class="ms-1  d-sm-inline">Registros </span> <i
                                    class="fa-solid fa-angle-right float-end"></i></a>
                            <ul class="collapse nav flex-column ms-1" id="submenu1" data-bs-parent="#menu">
                                <li class="w-100">
                                    <a href="../Registros/IngresarNuevoRegistro.html" class="nav-link px-4 px-sm-4 "> <span
                                            class=" d-sm-inline">Nuevo Registro</span></a>
                                </li>
                                <li>
                                    <a href="../Registros/ListaRegistro.html" class="nav-link px-4 px-sm-4 "> <span
                                            class=" d-sm-inline">Lista de Registros</span></a>
                                </li>
                                <li>
                                    <a href="../Registros/GraficosRegistro.html" class="nav-link px-4 px-sm-4 "> <span class=" d-sm-inline">Gráficos</span></a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item w-100 hover-item">
                            <a href="#trabajadoressubmenu" data-bs-toggle="collapse" class="nav-link px-2 px-sm-4 align-middle">
                                <i class="fa-solid fa-briefcase"></i> <span class="ms-1  d-sm-inline">Trabajadores</span> <i
                                    class="fa-solid fa-angle-right float-end"></i></a>
                            <ul class="collapse nav flex-column ms-1" id="trabajadoressubmenu" data-bs-parent="#menu">
                                <li class="w-100">
                                    <a href="../Trabajadores/NuevoTrabajador.html" class="nav-link px-sm-4 px-4"> <span
                                            class=" d-sm-inline">Nuevo Trabajador</span></a>
                                </li>
                                <li>
                                    <a href="../Trabajadores/VerTrabajadores.html" class="nav-link px-sm-4 px-4"> <span
                                            class=" d-sm-inline">Ver Trabajadores</span></a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item w-100 hover-item">
                            <a href="#submenu2" data-bs-toggle="collapse" class="nav-link px-2 px-sm-4 align-middle ">
                                <i class="fa-solid fa-users"></i> <span class="ms-1  d-sm-inline">Clientes</span> <i
                                    class="fa-solid fa-angle-right float-end"> </i></a>
                            <ul class="collapse nav flex-column ms-1" id="submenu2" data-bs-parent="#menu">
                                <li class="w-100">
                                    <a href="../Clientes/NuevoCliente.html" class="nav-link px-sm-4 px-4"> <span class=" d-sm-inline">Nuevo Cliente</span></a>
                                </li>
                                <li>
                                    <a href="../Clientes/VerClientes.html" class="nav-link px-sm-4 px-4"> <span class=" d-sm-inline">Ver Clientes</span></a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item w-100 hover-item">
                            <a href="#submenu3" data-bs-toggle="collapse" class="nav-link px-2 px-sm-4 align-middle">
                                <i class="fa-solid fa-box"></i> <span class="ms-1  d-sm-inline">Productos</span> <i
                                    class="fa-solid fa-angle-right float-end"></i></a>
                            <ul class="collapse nav flex-column ms-1" id="submenu3" data-bs-parent="#menu">
                                <li class="w-100">
                                    <a href="../Productos/NuevoProducto.html" class="nav-link px-sm-4 px-4"> <span
                                            class=" d-sm-inline">Nuevo Producto</span></a>
                                </li>
                                <li>
                                    <a href="../Productos/VerProductos.html" class="nav-link px-sm-4 px-4"> <span class=" d-sm-inline">Ver Productos</span></a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <hr>
                    <div class="dropdown pb-4 w-100 px-4">
                        <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1"
                           data-bs-toggle="dropdown"
                           aria-expanded="false">
                            <img src="../img/general/misionvision.jpg" alt="hugenerd" width="30" height="30" class="rounded-circle">
                            <span class="d-none d-sm-inline mx-1">Usuario</span>
                        </a>
                        <ul class="dropdown-menu bg-primary shadow">
                            <li class="hover-item"><a class="dropdown-item text-light " href="#">Perfil</a></li>
                            <li>
                                <hr class="dropdown-divider text-light">
                            </li>
                            <li class="hover-item"><a class="dropdown-item text-light hover-item" href="../login.html">Cerrar Session</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="col py-3">
            <!--            <a href="#" data-bs-target="#sidebar" data-bs-toggle="collapse" class="border rounded-3 p-1 text-decoration-none"><i class="bi bi-list bi-lg py-2 p-1"></i> Menu</a>-->
            <ul class="navbar-nav flex-row align-items-center">
                <li class="nav-item">
                    <button class="navbar-toggler bg-primary" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar" aria-controls="navbarNav"
                            aria-expanded="false"
                            aria-label="Toggle navigation">
                        <i class="fa-solid fa-bars text-light"></i>
                    </button>
                </li>
                <li class="nav-item px-3">
                    <a class="nav-link active text-center" aria-current="page" href="/">INICIO</a>
                </li>
                <li class="nav-item px-2">
                    <a class="nav-link text-center" href="#Nosotros">WEB</a>
                </li>
            </ul>
            <div class="container my-sm-5 my-2 px-0">
                <div class="row">

                    <div class="col-12 d-flex justify-content-between align-items-center">
                        <h2 class="py-3 text-center">LISTA DE REGISTROS</h2>
                        <a href="../Registros/IngresarNuevoRegistro.html" class="h-75 btn btn-primary">Nuevo Registro</a>
                    </div>
                    <div class="col-12">
                        <div id="tableregistros"></div>
                    </div>
                </div>
            </div>
<!--            #region Modal Detalle Inventario-->
            <div class="modal fade" id="modaltablaDetalleRegistros" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalToggleLabel">Detalles del Registro</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <input type="hidden" class="form-control" id="registro">
                                <input type="hidden" class="form-control" id="precioregistro">
                                <div class="mb-3 col-12 col-sm-4">
                                    <label for="notas" class="form-label">Notas</label>
                                    <input type="text" class="form-control" id="notas">
                                </div>
                                <div class="mb-3 col-12 col-sm-4">
                                    <label for="fecha" class="form-label">Fecha</label>
                                    <input type="date" class="form-control" id="fecha">
                                </div>
                                <div class="mb-3 col-12 col-sm-4">
                                    <label for="cliente" class="form-label">Cliente</label>
                                    <select class="form-select" id="cliente">
                                        <option selected>Seleccione al Cliente</option>
                                    </select>
                                </div>
                            </div>
                            <div id="tablaDetalleRegistro"></div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button class="btn btn-primary" id="btnsaveregistro" >Guardar Datos Registro</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="modalEditDetalleRegistro" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalToggleLabel2">Modal 2</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <h2 class="py-3 text-center">EDITAR DETALLE REGISTRO</h2>
                                <input type="hidden" class="form-control" id="detalle">
                                <div class="mb-3 col-12 col-sm-4">
                                    <label for="producto" class="form-label">Producto</label>
                                    <select class="form-select" aria-label="Default select example" id="producto">
                                        <option selected>Seleccione el Producto</option>
                                    </select>
                                </div>
                                <div class="mb-3 col-12 col-sm-4">
                                    <label for="cantidad" class="form-label">Cantidad</label>
                                    <input type="number" class="form-control" id="cantidad" value="1" min="1" max="100000">
                                </div>
                                <div class="mb-3 col-12 col-sm-4">
                                    <label for="precio" class="form-label">Precio Total</label>
                                    <input type="number" disabled class="form-control" id="precio">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" id="btnsavedetregistro">Guardar Detalle Registro</button>
                        </div>
                    </div>
                </div>
            </div>
<!--            #endregion-->
        </div>
    </div>
</div>
<!--#endregion-->
<script type="module" src="../js/RegistroInventario/ListaRegistroInventarioDash.js"></script>
<script !src="">
    function eliminarregistro(idregistro){
        swal({
            title: "Esta Seguro de Eliminar",
            text: "Una vez eliminado los datos no se podra recuperar",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {
                    fetch(`https://localhost:7058/api/RegistrosInventarios/${idregistro}`,{method: "DELETE"})
                        .then(function (response) {
                            console.log(response);
                            swal("Se Elimino con Exito").then((value) => {
                                window.location.href = "ListaRegistro.html"
                            });
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                } else {
                    swal("No se Eliminó ningun Dato", {
                        icon: "success",
                    });
                }
            });
    }
    function eliminarregistrodetalle(idregistrodetalle){
        swal({
            title: "Esta Seguro de Eliminar",
            text: "Una vez eliminado los datos no se podra recuperar",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {
                    fetch(`https://localhost:7058/api/DetalleRegistroes/${idregistrodetalle}`,{method: "DELETE"})
                        .then(function (response) {
                            console.log(response);
                            swal("Se Elimino con Exito").then((value) => {
                                window.location.href = "ListaRegistro.html"
                            });
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                } else {
                    swal("No se Eliminó ningun Dato", {
                        icon: "success",
                    });
                }
            });
    }
</script>
</body>
</html>